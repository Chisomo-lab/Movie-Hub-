<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Movie Hub Pro</title>

<!-- Font Awesome for nav icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" />

<style>
body { margin:0; background:#111; color:#fff; font-family: Arial, sans-serif; }
header { display:flex; flex-direction:column; align-items:center; padding:15px 0; background:#000; }
header h1 { color:#e50914; font-size:36px; margin:0 0 10px; }

nav { display:flex; gap:15px; flex-wrap:wrap; justify-content:center; transition:0.3s; }
nav a { color:#fff; text-decoration:none; font-weight:bold; display:flex; align-items:center; gap:5px; padding:5px 10px; position:relative; }
nav a i { font-size:14px; }
nav a::after { content:""; position:absolute; width:0; height:2px; left:0; bottom:0; background:#e50914; transition:0.3s; }
nav a:hover::after { width:100%; }

.search-bar { margin:15px 0; width:80%; max-width:600px; }
.search-bar input { width:100%; padding:12px 15px; border-radius:25px; border:none; font-size:16px; outline:none; transition:0.3s; }
.search-bar input:focus { box-shadow:0 0 8px #e50914; }

.category { padding:20px; }
.category h3 { margin:10px 0; font-size:24px; }
.movie-row { display:flex; flex-wrap:wrap; gap:15px; }
.movie-card { width:200px; background:#1a1a1a; padding:10px; border-radius:10px; box-shadow:0 0 8px rgba(0,0,0,0.5); transition: transform 0.3s; }
.movie-card:hover { transform: scale(1.08); }
.movie-card img { width:100%; border-radius:6px; }
.movie-card h4 { font-size:14px; margin:8px 0 4px; }
.movie-card p { font-size:12px; color:#bbb; margin:0 0 8px; }
.btn-box { display:flex; justify-content:space-between; margin-top:5px; }
.btn-box a { padding:4px 8px; border-radius:4px; font-size:12px; text-decoration:none; color:#fff; }
.btn-box a.stream { background:#e50914; }
.btn-box a.download { background:#444; }
.load-btn { margin-top:10px; padding:6px 12px; border:none; background:#e50914; color:#fff; border-radius:5px; cursor:pointer; font-weight:bold; }
.load-btn:hover { background:#ff3b2f; }
</style>

<!-- Adsense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3798659133542290" crossorigin="anonymous"></script>
</head>
<body>

<header>
  <h1>Movie Hub Pro</h1>

  <!-- AdSense inside header -->
  <div style="text-align:center; margin:10px 0; width:100%;">
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-3798659133542290"
         data-ad-slot="6354626837"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <nav>
    <a href="#"><i class="fas fa-home"></i> Home</a>
    <a href="#categories"><i class="fas fa-th-large"></i> Categories</a>
    <a href="#search-results"><i class="fas fa-search"></i> Search</a>
    <a href="#action"><i class="fas fa-bolt"></i> Action</a>
    <a href="#comedy"><i class="fas fa-laugh"></i> Comedy</a>
    <a href="#horror"><i class="fas fa-ghost"></i> Horror</a>
    <a href="#anime"><i class="fas fa-dragon"></i> Anime</a>
    <a href="#animated"><i class="fas fa-film"></i> Animated</a>
  </nav>

  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search movies, anime, or shows...">
  </div>
</header>

<section id="categories">
  <div class="category">
    <h3>Action</h3>
    <div class="movie-row" id="action"></div>
    <button class="load-btn" id="action-load">Load More</button>
  </div>
  <div class="category">
    <h3>Horror</h3>
    <div class="movie-row" id="horror"></div>
    <button class="load-btn" id="horror-load">Load More</button>
  </div>
  <div class="category">
    <h3>Comedy</h3>
    <div class="movie-row" id="comedy"></div>
    <button class="load-btn" id="comedy-load">Load More</button>
  </div>
  <div class="category">
    <h3>Anime</h3>
    <div class="movie-row" id="anime"></div>
    <button class="load-btn" id="anime-load">Load More</button>
  </div>
  <div class="category">
    <h3>Animated/Cartoons</h3>
    <div class="movie-row" id="animated"></div>
    <button class="load-btn" id="animated-load">Load More</button>
  </div>
</section>

<section id="search-results" class="category">
  <h3>Search Results</h3>
  <div class="movie-row" id="searchContainer"></div>
</section>

<script>
// ===================
// Fetch from Archive.org
// ===================
async function fetchMovies(query, rows=30){
  const url = `https://archive.org/advancedsearch.php?q=${query}+AND+mediatype:(movies)&fl[]=identifier,title,description,mediatype,collection,year&rows=${rows}&page=1&output=json`;
  const res = await fetch(url);
  const data = await res.json();
  return data.response.docs;
}

// Categorize automatically
function categorizeMovies(movies){
  const categories = {action:[], comedy:[], horror:[], anime:[], animated:[]};
  movies.forEach(movie=>{
    const col = movie.collection?.toLowerCase() || "";
    const type = movie.mediatype?.toLowerCase() || "";
    const title = movie.title?.toLowerCase() || "";

    if(col.includes("anime") || title.includes("anime")) categories.anime.push(movie);
    else if(col.includes("cartoon") || col.includes("animation") || type.includes("animation") || title.includes("cartoon")) categories.animated.push(movie);
    else if(title.includes("action") || col.includes("action")) categories.action.push(movie);
    else if(title.includes("comedy") || col.includes("comedy")) categories.comedy.push(movie);
    else if(title.includes("horror") || col.includes("horror") || title.includes("ghost") || title.includes("zombie")) categories.horror.push(movie);
    else categories.action.push(movie); // fallback
  });
  return categories;
}

// Render Netflix-style grid
function renderMovieGrid(containerId, movies){
  const container = document.getElementById(containerId);
  movies.forEach(movie=>{
    const card = document.createElement("div");
    card.className="movie-card";

    const img = document.createElement("img");
    img.src = `https://archive.org/services/img/${movie.identifier}`;
    img.alt = movie.title;

    const title = document.createElement("h4");
    title.textContent = movie.title;

    const desc = document.createElement("p");
    desc.textContent = movie.description ? movie.description.substring(0,80)+"..." : "No description";

    const btnBox = document.createElement("div");
    btnBox.className="btn-box";

    const streamBtn = document.createElement("a");
    streamBtn.href = `https://archive.org/details/${movie.identifier}`;
    streamBtn.target="_blank";
    streamBtn.textContent="Stream";
    streamBtn.className="stream";

    const downloadBtn = document.createElement("a");
    downloadBtn.href = `https://archive.org/download/${movie.identifier}`;
    downloadBtn.target="_blank";
    downloadBtn.textContent="Download";
    downloadBtn.className="download";

    btnBox.appendChild(streamBtn);
    btnBox.appendChild(downloadBtn);

    card.appendChild(img);
    card.appendChild(title);
    card.appendChild(desc);
    card.appendChild(btnBox);

    container.appendChild(card);
  });
}

// Load More functionality
const state = {};
const moviesPerPage = 6;
["action","comedy","horror","anime","animated"].forEach(cat=>state[cat]=0);
let categorizedData = {action:[], comedy:[], horror:[], anime:[], animated:[]};

function loadMore(category){
  const catMovies = categorizedData[category];
  const start = state[category];
  const end = start + moviesPerPage;
  renderMovieGrid(category, catMovies.slice(start,end));
  state[category]=end;
  if(state[category]>=catMovies.length) document.getElementById(`${category}-load`).style.display="none";
}

// Initial fetch
async function init(){
  const allMovies = await fetchMovies("feature_films");
  categorizedData = categorizeMovies(allMovies);
  ["action","comedy","horror","anime","animated"].forEach(cat=>{
    loadMore(cat);
    document.getElementById(`${cat}-load`).addEventListener("click",()=>loadMore(cat));
  });
}

init();

// Search functionality
const searchInput = document.getElementById("searchInput");
searchInput.addEventListener("keypress", async (e)=>{
  if(e.key==="Enter"){
    const query = searchInput
