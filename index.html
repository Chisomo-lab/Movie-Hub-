<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Movie Hub Pro</title>
  <link rel="stylesheet" href="style.css">
  <!-- Adsense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3798659133542290" crossorigin="anonymous"></script>
</head>
<body>
  <header>
    <h1>üé¨ Movie Hub Pro</h1>
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Search movies, anime, football...">
      <button onclick="searchVideos()">üîç Search</button>
    </div>
  </header>  <nav class="categories">
    <button onclick="loadCategory('movies')">Movies</button>
    <button onclick="loadCategory('cartoons')">Cartoons</button>
    <button onclick="loadCategory('sports')">Football & Sports</button>
    <button onclick="loadCategory('anime')">Anime</button>
    <button onclick="loadCategory('popcorn')">Popcorn</button>
    <button onclick="loadCategory('television')">Television</button>
  </nav>  <!-- Trending Section -->  <section id="trending">
    <h2>üî• Trending Now</h2>
    <div class="scroll-container" id="trendingContainer"></div>
  </section>  <!-- Main Grid -->  <main>
    <h2 id="categoryTitle">Movies</h2>
    <div class="grid" id="videoGrid"></div>
  </main>  <footer>
    ¬© Gabriel Sakala & Kingsley Mudenda | Content mirrored from <a href="https://archive.org" target="_blank">Archive.org</a>
  </footer>  <script>
const COLLECTIONS = {
  movies: "moviesandfilms",
  cartoons: "animationandcartoons",
  sports: "sports",
  anime: "anime",
  popcorn: "popcornproject",
  television: "television"
};

let currentCategory = "movies";
let currentPage = 0;
let isLoading = false;
let shownIds = new Set();

async function fetchVideos(collection, page = 0, sort = "downloads desc") {
  const start = page * 20;
  const url = `https://archive.org/advancedsearch.php?q=collection:${collection}&output=json&rows=20&fl[]=identifier,title,creator,year,description,downloads&sort[]=${encodeURIComponent(sort)}&start=${start}`;
  const res = await fetch(url);
  const data = await res.json();
  return data.response.docs.map(v => ({
    identifier: v.identifier,
    title: v.title,
    creator: v.creator || "Unknown",
    year: v.year || "N/A",
    description: v.description || ""
  }));
}

function renderVideos(items, containerId, append = false) {
  const container = document.getElementById(containerId);
  if(!append) container.innerHTML = "";
  items.forEach(item => {
    if(shownIds.has(item.identifier)) return;
    shownIds.add(item.identifier);
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
      <img src="https://archive.org/services/img/${item.identifier}" alt="${item.title}">
      <h3>${item.title}</h3>
      <p>${item.creator} (${item.year})</p>
      <div class="buttons">
        <a href="https://archive.org/details/${item.identifier}" target="_blank">‚ñ∂ Stream</a>
        <a href="https://archive.org/download/${item.identifier}" target="_blank">‚¨á Download</a>
      </div>
    `;
    container.appendChild(div);
  });
}

async function loadTrending() {
  const trendingContainer = document.getElementById("trendingContainer");
  trendingContainer.innerHTML="";
  const keys = ["movies","cartoons","sports","anime","popcorn","television"];
  for(let k of keys){
    const vids = await fetchVideos(COLLECTIONS[k],0,"downloads desc");
    const top = vids.slice(0,5);
    renderVideos(top,"trendingContainer",true);
  }
}

async function fetchCategoryPage(cat,page){
  if(cat==="sports"){
    let vids = await fetchVideos(COLLECTIONS[cat], page, "year desc");
    const football = vids.filter(v=>v.title.toLowerCase().includes("football")).sort((a,b)=>b.year-a.year);
    const others = vids.filter(v=>!v.title.toLowerCase().includes("football")).sort((a,b)=>b.year-a.year);
    return [...football,...others];
  } else if(cat==="anime"){
    return await fetchVideos(COLLECTIONS[cat], page, "downloads desc");
  } else {
    return await fetchVideos(COLLECTIONS[cat], page, "downloads desc");
  }
}

async function loadCategory(cat) {
  currentCategory = cat;
  currentPage = 0;
  shownIds.clear();
  document.getElementById("categoryTitle").innerText = cat.toUpperCase();
  document.getElementById("videoGrid").innerHTML = "";

  const vids = await fetchCategoryPage(cat, currentPage);
  renderVideos(vids,"videoGrid",false);
}

window.addEventListener("scroll", async () => {
  if(window.innerHeight + window.scrollY >= document.body.offsetHeight - 200 && !isLoading){
    isLoading = true;
    currentPage++;
    const more = await fetchCategoryPage(currentCategory, currentPage);
    renderVideos(more,"videoGrid",true);
    isLoading=false;
  }
});

async function searchVideos() {
  const term = document.getElementById("searchInput").value.trim();
  if(!term) return;
  const url = `https://archive.org/advancedsearch.php?q=${encodeURIComponent(term)}&output=json&rows=20&fl[]=identifier,title,creator,year,description,downloads`;
  const res = await fetch(url);
  const data = await res.json();
  const results = data.response.docs.map(v=>({
    identifier:v.identifier,
    title:v.title,
    creator:v.creator||"Unknown",
    year:v.year||"N/A",
    description:v.description||""
  }));
  document.getElementById("categoryTitle").innerText = `Results for "${term}"`;
  renderVideos(results,"videoGrid",false);
}

// Initial load
loadTrending();
loadCategory("movies");
  </script></body>
</html>
